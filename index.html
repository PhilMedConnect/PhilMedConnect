<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PhilMedConnect</title>
<style>
  @import url('https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css');

  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    margin: 0;
    padding: 0;
    background: linear-gradient(to bottom, #f5f7fb, #e2ebf7);
    color: #333;
  }
  .container {
    max-width: 600px;
    margin: 50px auto;
    padding: 25px;
    background: #fff;
    border-radius: 12px;
    box-shadow: 0 6px 20px rgba(0,0,0,0.1);
  }
  img.logo {
    width: 180px;
    display: block;
    margin: 0 auto 20px;
  }
  h1 {
    text-align: center;
    color: #2b6cb0;
    margin-bottom: 10px;
  }
  p {
    font-size: 16px;
    line-height: 1.5;
    text-align: center;
    margin-bottom: 25px;
  }
  form {
    display: flex;
    flex-direction: column;
    gap: 12px;
  }
  .input-group {
    position: relative;
  }
  .input-group i {
    position: absolute;
    left: 10px;
    top: 50%;
    transform: translateY(-50%);
    color: #999;
  }
  input, select, textarea {
    padding: 10px 10px 10px 35px;
    border-radius: 6px;
    border: 1px solid #ccc;
    font-size: 14px;
    width: 100%;
    box-shadow: inset 0 2px 4px rgba(0,0,0,0.05);
    transition: border 0.3s;
  }
  input:focus, select:focus, textarea:focus {
    border-color: #2b6cb0;
    outline: none;
  }
  button {
    padding: 12px;
    border: none;
    border-radius: 6px;
    background-color: #2b6cb0;
    color: white;
    font-size: 16px;
    cursor: pointer;
    transition: background 0.3s;
  }
  button:hover {
    background-color: #1a4c7d;
  }
  .error, .success {
    text-align: center;
    font-weight: bold;
    margin-top: 10px;
  }
  .error { color: #d9534f; }
  .success { color: #28a745; }
  small { color: #666; }
</style>
</head>
<body>

<div class="container">
  <img src="philmedconnect_logo.png" alt="PhilMedConnect Logo" class="logo">

  <h1>Para sa Active PhilHealth Members</h1>
  <p>Kung may nararamdaman o sakit, mag-register ngayon! Konektado ka sa licensed doctor online. Kung may PhilHealth-covered medication, ito ay ihahatid sa bahay mo <strong>no patient cost</strong>.</p>

  <form id="leadForm">

    <div class="input-group">
      <i class="fa fa-user"></i>
      <input type="text" name="firstName" placeholder="First Name *" required>
    </div>

    <div class="input-group">
      <i class="fa fa-user"></i>
      <input type="text" name="middleName" placeholder="Middle Name">
    </div>

    <div class="input-group">
      <i class="fa fa-user"></i>
      <input type="text" name="lastName" placeholder="Last Name *" required>
    </div>

    <div class="input-group">
      <i class="fa fa-asterisk"></i>
      <select name="suffix">
        <option value="">Suffix</option>
        <option value="Jr">Jr</option>
        <option value="Sr">Sr</option>
        <option value="III">III</option>
        <option value="IV">IV</option>
      </select>
    </div>

    <div class="input-group">
      <i class="fa fa-calendar"></i>
      <input type="date" name="dob" required>
    </div>

    <div class="input-group">
      <i class="fa fa-id-card"></i>
      <input type="text" name="philhealthNumber" placeholder="PhilHealth Number *" required>
    </div>

    <div class="input-group">
      <i class="fa fa-phone"></i>
      <input type="text" name="contact" placeholder="Contact Number *" required>
      <small>Enter 10 or 11 digits, numbers only.</small>
    </div>

    <div class="input-group">
      <i class="fa fa-envelope"></i>
      <input type="email" name="email" placeholder="Email Address">
    </div>

    <div class="input-group">
      <i class="fa fa-home"></i>
      <input type="text" name="streetAddress" placeholder="Street Address *" required>
    </div>

    <div class="input-group">
      <i class="fa fa-map-marker-alt"></i>
      <input type="text" name="barangay" placeholder="Barangay *" required>
    </div>

    <div class="input-group">
      <i class="fa fa-city"></i>
      <input type="text" name="city" placeholder="Municipality / City *" required>
    </div>

    <div class="input-group">
      <i class="fa fa-flag"></i>
      <input type="text" name="province" placeholder="Province *" required>
    </div>

    <div class="input-group">
      <i class="fa fa-stethoscope"></i>
      <textarea name="symptoms" placeholder="Symptoms / Reason for Consult *" rows="3" required></textarea>
    </div>

    <button type="submit">Submit</button>
    <button type="button" id="clearBtn">Clear Form</button>

    <div id="responseMsg"></div>
  </form>
</div>

<script>
const form = document.getElementById("leadForm");
const responseMsg = document.getElementById("responseMsg");
const clearBtn = document.getElementById("clearBtn");

form.addEventListener("submit", function(e){
  e.preventDefault();
  responseMsg.textContent = "";

  const formData = {
    firstName: form.firstName.value.trim(),
    middleName: form.middleName.value.trim(),
    lastName: form.lastName.value.trim(),
    suffix: form.suffix.value,
    dob: form.dob.value,
    philhealthNumber: form.philhealthNumber.value.trim(),
    contact: form.contact.value.trim(),
    email: form.email.value.trim(),
    streetAddress: form.streetAddress.value.trim(),
    barangay: form.barangay.value.trim(),
    city: form.city.value.trim(),
    province: form.province.value.trim(),
    symptoms: form.symptoms.value.trim()
  };

  fetch("https://script.google.com/macros/s/AKfycbyM7-v-sOMNcWsnKpeX5SMkYXZPM2cbMJNXWVZc7Ncg0jTy6YZ5DwzuylD0AL0aO5wmKA/exec", {
    method: "POST",
    body: JSON.stringify(formData)
  })
  .then(res => res.json())
  .then(data => {
    if(data.status === "success") {
      responseMsg.textContent = "Thank you! We will reach you shortly. Keep your lines open.";
      responseMsg.className = "success";
      form.reset();
    } else if(data.status === "duplicate") {
      responseMsg.textContent = "Duplicate entry. PhilHealth number already exists.";
      responseMsg.className = "error";
    } else {
      responseMsg.textContent = data.message || "Submission error. Please try again.";
      responseMsg.className = "error";
    }
  })
  .catch(err => {
    responseMsg.textContent = "Submission error. Please try again.";
    responseMsg.className = "error";
  });
});

clearBtn.addEventListener("click", () => form.reset());
</script>

</body>
</html>
